
var x,  y,  quadrantx,xlocation,ylocation,spacer,xinit,yinit,xprime,yprime,arrowline ;
var  arrowlenght=20, arrowwidth=6, arrowconcav=21, taillenght=20;
var tailwidth=4, tailcolor="Cyan", tailorient="East", orientangle;
var autoslice =true;
   var x1, y1, z1
   var markSize = 0;
   var label = false;
  var sprayWidth = 50;
 var dotSize  = 1;
 var pencilWidth=1, brushWidth=10, eraserWidth=10, leftClick=16, alt=8;
var totalDistance=0;
var x,  y, xinit,yinit,xo,yo,xa,ya,x3,y3;

var GLlut=0;
macro 'Zoom tool [f11]' {setTool(11)}

//macro "AutoRun" {run("mbf ");}


 //  This is a set of tools similar to the pencil, paintbrush and 
//  eraser tools in NIH Image. The pencil and paintbrush draw
//  in the current foreground color and the eraser draws in the
//  current background color. The foreground and background
//  colors can be set by double-clicking on the eye dropper tool. 
//  Double-click on a tool icon to set the drawing width.
//     Crgb - set color
//     Bxy - set base location
//     Rxywh - draw rectangle
//     Fxywh - draw filled rectangle
//     Oxywh - draw oval
//     oxywh - draw filled oval
//     Lxyxy - draw line
//     Pxyxy...xy0 - draw polyline
//     Txyssc - draw character

//
// RGB Profiles Tool
//
// This is a tool macro that draws red, green and blue 
// line profiles from an RGB image on the same plot.

var listResults=false;


macro "Maximum (+shift for Sum) Intensity Projection Action Tool - C902T3f18Z"
	{
	if(isKeyDown("shift"))
		{run("Z Project...", "start=1 stop="+nSlices+" projection=[Sum Slices]");}
	else 
		{
		run("Z Project...", "start=1 stop="+nSlices+" projection=[Max Intensity]");
	}


	}


macro "Brightness & Contrast/Color Balance  Dialog Action Tool - C000D0dD0eD13D14D15D16D17D18D19D1aD1bD1cD1dD20D21D22D23D24D25D26D27D28D29D2aD2bD2cD2fD33D34D35D36D37D38D39D3aD3bD3eD3fD47D48D49D4aD4dD4eD4fD5cD5dD5eD5fD6bD6cD6dD6eD6fD7dD7eD7fD8dD8eD8fD9dD9eD9fDaeDafDbeDbfDcfDdfDefDffC000C111C222C333C444D1fD2eD3dD4cD5bD6aD79D87D88D96Da5Db4Dc3Dd2De1Df0C444C555C666C777C888C999CaaaCbbbCcccD0fD1eD2dD3cD4bD5aD69D78D86D95Da4Db3Dc2Dd1De0CcccCdddCeeeCfff"{

	if(bitDepth() ==24)
		{run("Color Balance...");}
	else{	
		run("Brightness/Contrast...");}

}


 macro "Set Threshold Dialog Action Tool - C000D0dD0eD0fD13D14D15D16D17D18D19D1aD1bD1cD1dD1eD1fD20D21D22D23D24D25D26D27D28D29D2aD2bD2cD2dD2eD2fD33D34D35D36D37D38D39D3aD3bD3cD3dD3eD3fD46D47D48D49D4aD4bD4cD4dD4eD4fDdeDdfDefDffCf00D6bD6cD6dD6eD6fD7cD7dD7eD7fD8cD8dD8eD8fD9dD9eD9fDadDaeDafDbdDbeDbfC888D50D51D52D53D54D55D56D57D58D59D5aD5bD5cD5dD5eD5fDc0Dc1Dc2Dc3Dc4Dc5Dc6Dc7Dc8Dc9DcaDcbDccDcdDceDcf"{
	run("Threshold...");

}

// Selection Color Menu Tool
// This macro set adds a menu to the toolbar that allows you to
// easily change the selection color. Also adds commands to
// Plugins>Menus to restore the previous selection color and
// to get the current color.

// Author: Gilles Carpentier, Faculte des Sciences et
// Technologies,  Universite Paris 12 Val de Marne, France

//adapted Seelection colour for LUT selection

var xx = requires138b(); // check version at install
function requires138b() {requires("1.38b"); return 0; }


var cCmds = newMenu("Select LUT Menu Tool",newArray("Grays", "Hi Lo Indicator", "Red", "Red Hot", "Green", "Green Hot", "Blue","Magenta","Yellow","Cyan"));

macro "Select LUT Menu Tool - C900L222eCf00L323eCfa0L424eCff5L525eCde7L626eC7f0L727eCbfdL828eC7ffL929eC58fLa2aeC60fLb2beCd0dLc2ceCf8fLd2deCfcfLe2eeCfffLf2fe"
{
	cmd=getArgument();
	run(cmd);
}

macro "RGB Merge/Split Action Tool - Cff0D63D64D65D71D72D73D74D75D81D82D83D84D85D93D94D95C0f0D90D91D92Da0Da1Da2Da3Da4Da5Da6Db0Db1Db2Db3Db4Db5Db6Dc0Dc1Dc2Dc3Dc4Dc5Dc6Dc7Dc8Dd1Dd2Dd3Dd4Dd5Dd6Dd7Dd8De1De2De3De4De5De6De7De8Df3Df4Df5Df6Cf0fD39D47D48D49D57D58D59D67D68D69Cf00D03D04D05D06D11D12D13D14D15D16D17D18D21D22D23D24D25D26D27D28D30D31D32D33D34D35D36D37D38D40D41D42D43D44D45D46D50D51D52D53D54D55D56D60D61D62C00fD3aD3bD3cD4aD4bD4cD4dD4eD5aD5bD5cD5dD5eD6aD6bD6cD6dD6eD6fD79D7aD7bD7cD7dD7eD7fD89D8aD8bD8cD8dD8eD8fD9aD9bD9cD9dD9eD9fDaaDabDacDadDaeDbaDbbDbcDbdDbeDcaDcbDccCfffD66D76D77D78D86D87D88D96C0ffD97D98D99Da7Da8Da9Db7Db8Db9Dc9"
{
if((nSlices==3)&&bitDepth!=24)
	{showStatus("3-Slice greyscale image detected. Running 'Stack to RGB'");
	run("Convert Stack to RGB"); exit();
	}
else
	{if((bitDepth==24)||is("composite"))
		{showStatus("24-Bit image detected. Running 'RGB Split'");
		setKeyDown("alt");
		run("RGB Split", "split"); exit();}
	if(nSlices>1)
		{showStatus("Greyscale stack detected. Running 'RGB Merge'");	
		run("RGB Merge..."); exit();
		}
	
	else 
		{showStatus("Greyscale image detected. Running RGB Merge'");
		run("RGB Merge..."); exit();
		}
	}

} 


 var x1, y1, z1
   var markSize = 0;
   var label = false;

 

macro "Scale Bar Action Tool - C902F02f3 -C902T1e0cµ -C902T6e0cm"
	{
	run("Scale Bar...");
	}


macro "ROI Manager Action Tool - C902D00D01D02D10D11D12D20D21D22D30D31D32D40D41D42D50D51D52D60D61D62D70D71D72D80D81D82D90D91D92Da0Da1Da2Db0Db1Db2Dc0Dc1Dc2CfffD03D04D05D06D07D08D09D0aD0bD0cD0dD0eD0fD13D14D15D16D17D18D19D1aD1bD1cD1dD1eD1fD23D24D25D26D27D28D29D2aD2bD2cD2dD2eD2fD33D34D35D36D37D38D39D3aD3bD3cD3dD3eD3fD43D44D45D46D47D48D49D4aD4bD4cD4dD4eD4fD53D54D55D56D57D58D59D5aD5bD5cD5dD5eD5fD63D64D65D66D67D68D69D6aD6bD6cD6dD6eD6fD73D74D75D76D77D78D79D7aD7bD7cD7dD7eD7fD83D84D85D86D87D88D89D8aD8bD8cD8dD8eD8fD93D96D99D9cD9fDa3Da6Da9DacDafDb3Db6Db9DbcDbfDc3Dc6Dc9DccDcfDd3Dd6Dd9DdcDdfDe3De6De9DecDefDf3Df6Df9DfcDffCbbbD94D95D97D98D9aD9bD9dD9eDa4Da5Da7Da8DaaDabDadDaeDb4Db5Db7Db8DbaDbbDbdDbeDc4Dc5Dc7Dc8DcaDcbDcdDceDd4Dd5Dd7Dd8DdaDdbDddDdeDe4De5De7De8DeaDebDedDeeDf4Df5Df7Df8DfaDfbDfdDfeCf00Dd0Dd1Dd2De0De1De2Df0Df1Df2"{

run("ROI Manager...");
}

macro "MBF On Line Help Action Tool - Cfc4o11dd - C902O11dd -C902T5c0c?"
	{
	doc ();
	}


var MBFLink="http://www.macbiophotonics.ca/imagej/index.htm";
var MBFLink2="http://www.macbiophotonics.ca/downloads.htm";

function doc () {
	run("URL...", "url=["+MBFLink+"]");
}

function doc2 () {
	run("URL...", "url=["+MBFLink2+"]");
}

